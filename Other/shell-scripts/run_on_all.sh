#!/bin/sh
#

stty -echo;
read -p "Input password:" A;
stty echo;
echo;

for HOST in  10.1.0.2 10.1.0.3 10.1.0.4 10.1.0.5 10.1.0.6 10.1.0.7 10.1.0.8 10.1.0.9 10.1.0.10 10.1.0.11\
 10.1.0.12 10.1.0.13 10.1.0.14 10.1.0.15 10.1.0.16 10.1.0.17 10.1.0.18 10.1.0.19 10.1.0.20 10.1.0.21\
 10.1.0.22 10.1.0.23 10.1.0.24 10.1.0.25 10.1.0.26 10.1.0.27 10.1.0.28 10.1.0.29 10.1.0.30 10.1.0.31\
 10.1.0.32 10.1.0.33 10.1.0.34 10.1.0.35 10.1.0.36 10.1.0.37 10.1.0.38 10.1.0.39 10.1.0.40 10.1.0.41\
 10.1.0.42 10.1.0.43 10.1.0.44 10.1.0.45 10.1.0.46 10.1.0.47 10.1.0.48 10.1.0.49 10.1.0.50 10.1.0.51\
 10.1.0.52 10.1.0.53 10.1.0.54 10.1.0.55 10.1.0.56 10.1.0.57 10.1.0.58 10.1.0.59 10.1.0.60 10.1.0.61\
 10.1.0.62 10.1.0.63 10.1.0.64 10.1.0.65 10.1.0.66 10.1.0.67 10.1.0.68 10.1.0.69 10.1.0.70 10.1.0.71\
 10.1.0.72 10.1.0.73 10.1.0.74 10.1.0.75 10.1.0.76 10.1.0.77 10.1.0.78 10.1.0.79 10.1.0.80 10.1.0.81\
 10.1.0.82 10.1.0.83 10.1.0.84 10.1.0.85 10.1.0.86 10.1.0.87 10.1.0.88 10.1.0.89 10.1.0.90 10.1.0.91\
 10.1.0.92 10.1.0.93 10.1.0.94 10.1.0.95 10.1.0.96 10.1.0.97 10.1.0.98 10.1.0.99 10.1.0.100 10.1.0.101
do

echo "Connecting to $HOST"
expect -c "set timeout -1;\
spawn ssh $HOST -l root \"whoami;apt-get update;apt-get upgrade;\";\
match_max 100000;\
expect *password:*;\
send -- $A\r;\
interact;"
echo "Finished job on $HOST"

done

